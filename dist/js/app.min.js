var app=angular.module("sample",[]);angular.module("sample").controller("firstController",["$scope","BenchAPIService",function(a,t){function e(a){var t=a.data,e=t;_.each(e,function(a){r.valueSet=a})}var r=this;!function(){a.loading=!0,t.getBenchEmployees().then(e)}()}]);var app=angular.module("sample");angular.module("sample").directive("chart",["chartsService",function(a){function t(t,e,r){var l=this;if(l.max=0,console.log(t),"pie"!=t.chartType)var n={id:t.id,datasetLabel:t.datasetLabel,datalabels:!0,maintainAspectRatio:!1,zoom:{enabled:!1,mode:"xy"},pan:{enabled:!1,mode:"xy"},chart:{height:300,type:t.chartType},responsive:!0,legend:{display:t.legendDisplay,position:"bottom"},title:{display:!1,text:"Chart.js Bar Chart"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:t.hScaleLabel,fontColor:"#000",fontSize:16}}],yAxes:[{display:!0,ticks:{beginAtZero:!t.yScaleMin,min:t.yScaleMin,max:t.yScaleMax,callback:function(a,e,r){return l.max<a&&(l.max=a),a+t.yScaleSuffix}},scaleLabel:{display:!0,labelString:t.yScaleLabel,fontColor:"#000",fontSize:16}}]},showTooltips:!1,tooltipTemplate:"<%= value %>",tooltips:{callbacks:{title:function(a,t){return a[0].xLabel+" : "+a[0].yLabel},label:function(a,t){t.datasets[a.datasetIndex].label;return""}}}};else if(t.chartType="pie")var n={id:t.id,datasetLabel:t.datasetLabel,chartData:t.chartData,datalabels:!0,maintainAspectRatio:!1,zoom:{enabled:!1,mode:"xy"},pan:{enabled:!1,mode:"xy"},chart:{height:300,type:t.chartType},responsive:!0,legend:{display:t.legendDisplay,position:"bottom"},title:{display:!1,text:"Chart.js Pie Chart"},showTooltips:!0,tooltipTemplate:"<%= value %>"};"profitability"===e.context.id&&(n.tooltips={callbacks:{label:function(a,t){return"Click for more details"}}}),t.$watchCollection("chartData",function(e,o){if(e){var i=a.generateChartData(t.chartData,t.hAxisProp,t.yAxisProp,JSON.parse(t.dateType),n),c=i.datasets,s=[];for(var p in c)s=s.concat(c[p].data);l.max=s[0];for(var b in s)l.max<s[b]&&(l.max=s[b]);var h=a.drawChart(r.id,i,n);if(h&&"Profitability GM YTD"===h.options.datasetLabel){var d=h.chart.ctx;d.canvas.onclick=function(a){var e=h.getElementsAtEvent(a);console.log(e),t.$emit("datapointClick",e)}}if(h&&"BenchSkillBarChart"===h.options.datasetLabel){var d=h.chart.ctx;d.canvas.onclick=function(a){var e=h.getElementsAtEvent(a);t.$emit("benchBarChartClick",e)}}if(h&&"BenchSkillPieChart"===h.options.datasetLabel){var d=h.chart.ctx;d.canvas.onclick=function(a){var e=h.getElementsAtEvent(a);t.$emit("benchPieChartClick",e)}}if(h&&"PracticeInputBarChart"===h.options.datasetLabel){var d=h.chart.ctx;d.canvas.onclick=function(a){var e=h.getElementsAtEvent(a);t.$emit("practiceBarChartClick",e)}}console.log(h)}})}function e(){}return{restrict:"E",template:"<canvas></canvas>",replace:!0,link:t,controller:e,scope:{id:"=",chartData:"=?",chartType:"=?",hAxisProp:"=?",yAxisProp:"=?",dateType:"=?",datasetLabel:"=?",legendDisplay:"@",yScaleSuffix:"@",hScaleLabel:"@",yScaleLabel:"@",yScaleMin:"@",yScaleMax:"@"}}}]),function(){"use strict";angular.module("sample");angular.module("sample").directive("firstOne",function(){return{restrict:"EA",bindToController:!0,controller:"firstController",controllerAs:"first",replace:!0,templateUrl:"index.html"}})}(),angular.module("sample").factory("BenchAPIService",["$http",function(a){var t={};return t.getBenchEmployees=function(){return a.get("json/data.json")},t}]),function(){angular.module("sample").service("chartsService",["$http","$rootScope","$window",function(a,t,e){function r(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+" "+a.getFullYear()}var l=["rgba(0, 234, 221, 0.5)","rgba(232, 140, 209, 0.5)","rgba(174, 140, 232, 0.5)","rgba(0, 169, 19, 0.5)","rgba(137, 204, 0, 0.5)","rgba(204, 176, 0, 0.5)","rgba(206, 105, 23, 0.5)","rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(136, 255, 0, 0.5)","rgba(142, 48, 160, 0.5)","rgba(0, 222, 220, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(0, 234, 221, 0.5)","rgba(153, 102, 255, 0.5)","rgba(139, 126, 255, 0.5)","rgba(142, 48, 160, 0.5)","rgba(191, 6, 6, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 206, 86, 0.5)","rgba(65, 196, 255, 0.5)","rgba(137, 204, 0, 0.5)","rgba(0, 169, 19, 0.5)","rgba(255, 159, 64, 0.5)","rgba(142, 48, 160, 0.5)","rgba(255, 206, 86, 0.5)","rgba(0, 222, 220, 0.5)","rgba(137, 204, 0, 0.5)","rgba(174, 140, 232, 0.5)","rgba(0, 169, 19, 0.5)","rgba(137, 204, 0, 0.5)"],n=this;n.charts=[],n.drawChart=function(a,t,e){var r=e.chart&&e.chart.height||300,l=e.chart&&e.chart.width||400,o=e.chart&&e.chart.type||"bar",i=document.getElementById(a).getContext("2d");i.canvas.height=r,i.canvas.width=l;var c=new Chart(i,{type:o,data:t,options:e});return n.charts.push(c),c},n.generateChartData=function(a,t,e,n,o){var i=n||!1,c=o.datasetLabel||"x-axis",s=[],p=[];if(a.constructor!==Array){var b=Object.keys(a);for(var h in b){var d=a[b[h]].data,u=a[b[h]].backgroundColor,g=a[b[h]].fill,v=a[b[h]].lineColor,c=a[b[h]].label,f=[];for(var m in d){var y=d[m][t];y=1==i?r(new Date(y)):y;var x=d[m][e];p.push(y),f.push(x)}var C={label:c,data:f,backgroundColor:u,fill:g,borderColor:v};s.push(C)}}else{var f=[],S=[];for(var h in a){var y=a[h][t];y=1==i?r(new Date(y)):y;var x=a[h][e];a[h].backgroundColor&&S.push(a[h].backgroundColor),null!==y&&p.push(y),f.push(x)}var C={label:c,data:f,backgroundColor:S.length>0?S:l};s.push(C)}var k=p;return{labels:$.unique(k),datasets:s}}}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL3NhbXBsZS5qcyIsImRpcmVjdGl2ZXMvY2hhcnQuanMiLCJkaXJlY3RpdmVzL3NhbXBsZS5qcyIsInNlcnZpY2VzL2JlbmNoLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9jaGFydC5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiQmVuY2hBUElTZXJ2aWNlIiwiZ2V0QmVuY2hFbXBsb3llZXNTdWNjZXNzSGFuZGxlciIsInJlc3BvbnNlIiwicmVzdWx0IiwiZGF0YSIsImRhdGFGb3JDaGFydCIsIl8iLCJlYWNoIiwibmV3RGF0YSIsInNlbGYiLCJ2YWx1ZVNldCIsInRoaXMiLCJsb2FkaW5nIiwiZ2V0QmVuY2hFbXBsb3llZXMiLCJ0aGVuIiwiZGlyZWN0aXZlIiwiY2hhcnRzU2VydmljZSIsImNoYXJ0TGlua2VyIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJtYXgiLCJjb25zb2xlIiwibG9nIiwiY2hhcnRUeXBlIiwiY2hhcnRPcHRpb25zIiwiaWQiLCJkYXRhc2V0TGFiZWwiLCJkYXRhbGFiZWxzIiwibWFpbnRhaW5Bc3BlY3RSYXRpbyIsInpvb20iLCJlbmFibGVkIiwibW9kZSIsInBhbiIsImNoYXJ0IiwiaGVpZ2h0IiwidHlwZSIsInJlc3BvbnNpdmUiLCJsZWdlbmQiLCJkaXNwbGF5IiwibGVnZW5kRGlzcGxheSIsInBvc2l0aW9uIiwidGl0bGUiLCJ0ZXh0Iiwic2NhbGVzIiwieEF4ZXMiLCJzY2FsZUxhYmVsIiwibGFiZWxTdHJpbmciLCJoU2NhbGVMYWJlbCIsImZvbnRDb2xvciIsImZvbnRTaXplIiwieUF4ZXMiLCJ0aWNrcyIsImJlZ2luQXRaZXJvIiwieVNjYWxlTWluIiwibWluIiwieVNjYWxlTWF4IiwiY2FsbGJhY2siLCJsYWJlbCIsImluZGV4IiwibGFiZWxzIiwieVNjYWxlU3VmZml4IiwieVNjYWxlTGFiZWwiLCJzaG93VG9vbHRpcHMiLCJ0b29sdGlwVGVtcGxhdGUiLCJ0b29sdGlwcyIsImNhbGxiYWNrcyIsInRvb2x0aXBJdGVtIiwieExhYmVsIiwieUxhYmVsIiwiZGF0YXNldHMiLCJkYXRhc2V0SW5kZXgiLCJjaGFydERhdGEiLCJjb250ZXh0IiwiJHdhdGNoQ29sbGVjdGlvbiIsIm5ld1ZhbCIsIm9sZFZhbCIsImdlbmVyYXRlQ2hhcnREYXRhIiwiaEF4aXNQcm9wIiwieUF4aXNQcm9wIiwiSlNPTiIsInBhcnNlIiwiZGF0ZVR5cGUiLCJpIiwiY29uY2F0IiwiaiIsImRyYXdDaGFydCIsIm9wdGlvbnMiLCJjdHgiLCJjYW52YXMiLCJvbmNsaWNrIiwiZXZ0IiwiYWN0aXZlUG9pbnRzIiwiZ2V0RWxlbWVudHNBdEV2ZW50IiwiJGVtaXQiLCJjaGFydENvbnRyb2xsZXIiLCJyZXN0cmljdCIsInRlbXBsYXRlIiwicmVwbGFjZSIsImxpbmsiLCJiaW5kVG9Db250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJmYWN0b3J5IiwiJGh0dHAiLCJiZW5jaEFQSSIsImdldCIsInNlcnZpY2UiLCIkcm9vdFNjb3BlIiwiJHdpbmRvdyIsImRhdGVUb01vbnRoIiwiZGF0ZSIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJDT0xPUlMiLCJ2bSIsImNoYXJ0cyIsImRpdklkIiwiY2FudmFzSGVpZ2h0IiwiY2FudmFzV2lkdGgiLCJ3aWR0aCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiQ2hhcnQiLCJwdXNoIiwicmF3RGF0YSIsInhBeGlzUHJvcCIsImlzRGF0ZXR5cGUiLCJjb25zdHJ1Y3RvciIsIkFycmF5IiwiZGF0YXNldE5hbWVzIiwiT2JqZWN0Iiwia2V5cyIsInJhd0RhdGFzZXQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJmaWxsIiwibGluZUNvbG9yIiwiRGF0ZSIsInV0aWxpemF0aW9uIiwiZGF0YXNldCIsImJvcmRlckNvbG9yIiwiYmFja2dyb3VuZENvbG9ycyIsImxlbmd0aCIs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S0FBQWMsR0FHQSxHQUFBQyxJQUNBbEYsTUFBQS9CLEVBQ0F2QixLQUFBQSxFQUNBbUksZ0JBQUFBLEVBQ0FDLEtBQUFBLEVBQ0FLLFlBQUFKLEVBRUFuRSxHQUFBdUQsS0FBQWUsUUFFQSxDQUNBLEdBQUF4SSxNQUNBMEksSUFDQSxLQUFBLEdBQUEzRCxLQUFBMkMsR0FBQSxDQUNBLEdBQUFwRSxHQUFBb0UsRUFBQTNDLEdBQUE0QyxFQUNBckUsR0FBQSxHQUFBc0UsRUFBQWxCLEVBQUEsR0FBQTRCLE1BQUFoRixJQUFBQSxDQUNBLElBQUFpRixHQUFBYixFQUFBM0MsR0FBQUosRUFDQStDLEdBQUEzQyxHQUFBb0QsaUJBQ0FPLEVBQUFqQixLQUFBQyxFQUFBM0MsR0FBQW9ELGlCQUVBLE9BQUE3RSxHQUNBRSxFQUFBaUUsS0FBQW5FLEdBRUF0RCxFQUFBeUgsS0FBQWMsR0FHQSxHQUFBQyxJQUNBbEYsTUFBQS9CLEVBQ0F2QixLQUFBQSxFQUVBbUksZ0JBQUFPLEVBQUFDLE9BQUEsRUFBQUQsRUFBQTVCLEVBRUE1QyxHQUFBdUQsS0FBQWUsR0FtQkEsR0FBQUksR0FBQXBGLENBa0JBLFFBSkFBLE9BQUFxRixFQUFBQyxPQUFBRixHQUNBMUUsU0FBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc2FtcGxlJywgW10pO1xuXG5hbmd1bGFyLm1vZHVsZSgnc2FtcGxlJykuY29udHJvbGxlcignZmlyc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnQmVuY2hBUElTZXJ2aWNlJywgXG5mdW5jdGlvbigkc2NvcGUsIEJlbmNoQVBJU2VydmljZSkge1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgZ2V0QmVuY2hFbXBsb3llZXMoKTtcblxuICAgIGZ1bmN0aW9uIGdldEJlbmNoRW1wbG95ZWVzKCkge1xuICAgICAgICAkc2NvcGUubG9hZGluZyA9IHRydWU7XG4gICAgICAgIEJlbmNoQVBJU2VydmljZVxuICAgICAgICAgICAgLmdldEJlbmNoRW1wbG95ZWVzKClcbiAgICAgICAgICAgIC50aGVuKGdldEJlbmNoRW1wbG95ZWVzU3VjY2Vzc0hhbmRsZXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEJlbmNoRW1wbG95ZWVzU3VjY2Vzc0hhbmRsZXIocmVzcG9uc2UpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIHZhciBkYXRhRm9yQ2hhcnQgPSByZXN1bHQ7XG4gICAgICAgIF8uZWFjaChkYXRhRm9yQ2hhcnQsIGZ1bmN0aW9uKG5ld0RhdGEpIHtcbiAgICAgICAgICAgIHNlbGYudmFsdWVTZXQgPSBuZXdEYXRhO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn1dKTtcbiIsInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc2FtcGxlJyk7XG5hbmd1bGFyLm1vZHVsZSgnc2FtcGxlJylcbiAgICAuZGlyZWN0aXZlKCdjaGFydCcsIFsnY2hhcnRzU2VydmljZScsXG4gICAgICAgIGZ1bmN0aW9uKGNoYXJ0c1NlcnZpY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxjYW52YXM+PC9jYW52YXM+JyxcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGxpbms6IGNoYXJ0TGlua2VyLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGNoYXJ0Q29udHJvbGxlcixcbiAgICAgICAgICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgICAgICAgICBpZDogJz0nLFxuICAgICAgICAgICAgICAgICAgICBjaGFydERhdGE6ICc9PycsXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZTogJz0/JyxcbiAgICAgICAgICAgICAgICAgICAgaEF4aXNQcm9wOiAnPT8nLFxuICAgICAgICAgICAgICAgICAgICB5QXhpc1Byb3A6ICc9PycsXG4gICAgICAgICAgICAgICAgICAgIGRhdGVUeXBlOiAnPT8nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0TGFiZWw6ICc9PycsXG4gICAgICAgICAgICAgICAgICAgIGxlZ2VuZERpc3BsYXk6ICdAJyxcbiAgICAgICAgICAgICAgICAgICAgeVNjYWxlU3VmZml4OiAnQCcsXG4gICAgICAgICAgICAgICAgICAgIGhTY2FsZUxhYmVsOiAnQCcsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZUxhYmVsOiAnQCcsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZU1pbjogJ0AnLFxuICAgICAgICAgICAgICAgICAgICB5U2NhbGVNYXg6ICdAJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhcnRMaW5rZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5tYXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNjb3BlKTtcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUuY2hhcnRUeXBlICE9IFwicGllXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzY29wZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXRMYWJlbDogc2NvcGUuZGF0YXNldExhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWxhYmVsczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLypvbkNsaWNrOiBmdW5jdGlvbihlLCBvLCBmKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdkYXRhcG9pbnRDbGljaycsIG8pO1xuICAgICAgICAgICAgICAgICAgfSwqL1xuICAgICAgICAgICAgICAgICAgICAgICAgem9vbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICd4eScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3h5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc2NvcGUuY2hhcnRUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLyplbGVtZW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICdibGFjaycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclNraXBwZWQ6ICdib3R0b20nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHNjb3BlLmxlZ2VuZERpc3BsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NoYXJ0LmpzIEJhciBDaGFydCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4QXhlczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVMYWJlbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nOiBzY29wZS5oU2NhbGVMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogJyMwMDAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6IDE2XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB5QXhlczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luQXRaZXJvOiBzY29wZS55U2NhbGVNaW4gPyBmYWxzZSA6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IHNjb3BlLnlTY2FsZU1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogc2NvcGUueVNjYWxlTWF4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKGxhYmVsLCBpbmRleCwgbGFiZWxzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5tYXggPCBsYWJlbClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXggPSBsYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFiZWwgKyBzY29wZS55U2NhbGVTdWZmaXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjYWxlTGFiZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFN0cmluZzogc2NvcGUueVNjYWxlTGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250Q29sb3I6ICcjMDAwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9vbHRpcHM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFRlbXBsYXRlOiBcIjwlPSB2YWx1ZSAlPlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZ1bmN0aW9uKHRvb2x0aXBJdGVtLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZGF0YS5kYXRhc2V0c1t0b29sdGlwSXRlbS5kYXRhc2V0SW5kZXhdLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbCArICc6ICcgKyB0b29sdGlwSXRlbS55TGFiZWwgKyAnKENsaWNrIGhlcmUgdG8gZ2V0IG1vcmUgZGF0YWZmZiknO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLyphbmltYXRpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb25maWcudHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLmNoYXJ0LmN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSBDaGFydC5oZWxwZXJzLmZvbnRTdHJpbmcoQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLmRlZmF1bHRGb250RmFtaWx5LCAnbm9ybWFsJywgQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLmRlZmF1bHRGb250RmFtaWx5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhLmRhdGFzZXRzLmZvckVhY2goZnVuY3Rpb24gKGRhdGFzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YXNldC5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gZGF0YXNldC5fbWV0YVtPYmplY3Qua2V5cyhkYXRhc2V0Ll9tZXRhKVswXV0uZGF0YVtpXS5fbW9kZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxUZXh0KGRhdGFzZXQuZGF0YVtpXSwgbW9kZWwueCwgbW9kZWwueSAtIDUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCovXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZnVuY3Rpb24odG9vbHRpcEl0ZW0sIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b29sdGlwSXRlbVswXS54TGFiZWwgKyAnIDogJyArIHRvb2x0aXBJdGVtWzBdLnlMYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZ1bmN0aW9uKHRvb2x0aXBJdGVtLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWwgPSBkYXRhLmRhdGFzZXRzW3Rvb2x0aXBJdGVtLmRhdGFzZXRJbmRleF0ubGFiZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3JldHVybiBsYWJlbCArICc6ICcgKyB0b29sdGlwSXRlbS55TGFiZWwgKyAnKENsaWNrIGhlcmUgdG8gZ2V0IG1vcmUgZGF0YSknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzY29wZS5jaGFydFR5cGUgPSBcInBpZVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFydE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogc2NvcGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0TGFiZWw6IHNjb3BlLmRhdGFzZXRMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0RGF0YTogc2NvcGUuY2hhcnREYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWxhYmVsczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgem9vbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICd4eScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFuOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3h5J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAzMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc2NvcGUuY2hhcnRUeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHNjb3BlLmxlZ2VuZERpc3BsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20nLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0NoYXJ0LmpzIFBpZSBDaGFydCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93VG9vbHRpcHM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0b29sdGlwVGVtcGxhdGU6IFwiPCU9IHZhbHVlICU+XCIsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5pZCA9PT0gJ3Byb2ZpdGFiaWxpdHknKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0T3B0aW9ucy50b29sdGlwcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbih0b29sdGlwSXRlbSwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0NsaWNrIGZvciBtb3JlIGRldGFpbHMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuXG5cblxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oJ2NoYXJ0RGF0YScsIGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdWYWwpIHtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhcnREYXRhID0gY2hhcnRzU2VydmljZS5nZW5lcmF0ZUNoYXJ0RGF0YShzY29wZS5jaGFydERhdGEsIHNjb3BlLmhBeGlzUHJvcCwgc2NvcGUueUF4aXNQcm9wLCBKU09OLnBhcnNlKHNjb3BlLmRhdGVUeXBlKSwgY2hhcnRPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzZXRzID0gY2hhcnREYXRhLmRhdGFzZXRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YXNldHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gZGF0YS5jb25jYXQoZGF0YXNldHNbaV0uZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWF4ID0gZGF0YVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm1heCA8IGRhdGFbal0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubWF4ID0gZGF0YVtqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGFydE9wdGlvbnMuc2NhbGVzLnlBeGVzWzBdLnRpY2tzLm1heCA9ICggc2VsZi5tYXggICk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0ID0gY2hhcnRzU2VydmljZS5kcmF3Q2hhcnQoYXR0cnMuaWQsIGNoYXJ0RGF0YSwgY2hhcnRPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0Lm9wdGlvbnMuZGF0YXNldExhYmVsID09PSAnUHJvZml0YWJpbGl0eSBHTSBZVEQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNoYXJ0LmNoYXJ0LmN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FudmFzLm9uY2xpY2sgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgYWN0aXZlUG9pbnRzID0gY2hhcnQuZ2V0RGF0YXNldEF0RXZlbnQoZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVBvaW50cyA9IGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudChldnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY3RpdmVQb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnZGF0YXBvaW50Q2xpY2snLCBhY3RpdmVQb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQgJiYgY2hhcnQub3B0aW9ucy5kYXRhc2V0TGFiZWwgPT09ICdCZW5jaFNraWxsQmFyQ2hhcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNoYXJ0LmNoYXJ0LmN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FudmFzLm9uY2xpY2sgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVBvaW50cyA9IGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudChldnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnYmVuY2hCYXJDaGFydENsaWNrJywgYWN0aXZlUG9pbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQgJiYgY2hhcnQub3B0aW9ucy5kYXRhc2V0TGFiZWwgPT09ICdCZW5jaFNraWxsUGllQ2hhcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNoYXJ0LmNoYXJ0LmN0eDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguY2FudmFzLm9uY2xpY2sgPSBmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVBvaW50cyA9IGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudChldnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnYmVuY2hQaWVDaGFydENsaWNrJywgYWN0aXZlUG9pbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0Lm9wdGlvbnMuZGF0YXNldExhYmVsID09PSAnUHJhY3RpY2VJbnB1dEJhckNoYXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSBjaGFydC5jaGFydC5jdHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbnZhcy5vbmNsaWNrID0gZnVuY3Rpb24oZXZ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVQb2ludHMgPSBjaGFydC5nZXRFbGVtZW50c0F0RXZlbnQoZXZ0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3ByYWN0aWNlQmFyQ2hhcnRDbGljaycsIGFjdGl2ZVBvaW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNoYXJ0Q29udHJvbGxlcigpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgXSk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc2FtcGxlJyk7XG4gICAgYW5ndWxhci5tb2R1bGUoJ3NhbXBsZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ2ZpcnN0T25lJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgICAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2ZpcnN0Q29udHJvbGxlcicsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnZmlyc3QnLFxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdpbmRleC5odG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG5cbn0pKCk7XG4iLCJhbmd1bGFyLm1vZHVsZShcInNhbXBsZVwiKVxuLmZhY3RvcnkoXCJCZW5jaEFQSVNlcnZpY2VcIiwgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICB2YXIgYmVuY2hBUEkgPSB7fTtcbiAgICBiZW5jaEFQSS5nZXRCZW5jaEVtcGxveWVlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdqc29uL2RhdGEuanNvbicpO1xuICAgIH07XG4gICAgcmV0dXJuIGJlbmNoQVBJO1xufV0pO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgIGFuZ3VsYXIubW9kdWxlKCdzYW1wbGUnKS5cbiAgICBzZXJ2aWNlKCdjaGFydHNTZXJ2aWNlJywgWyckaHR0cCcsICckcm9vdFNjb3BlJywgJyR3aW5kb3cnLFxuICAgICAgICBmdW5jdGlvbigkaHR0cCwgJHJvb3RTY29wZSwgJHdpbmRvdykge1xuXG4gICAgICAgICAgICB2YXIgQ09MT1JTID0gW1xuICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIzNCwgMjIxLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgyMzIsIDE0MCwgMjA5LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgxNzQsIDE0MCwgMjMyLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgwLCAxNjksIDE5LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgxMzcsIDIwNCwgMCwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMjA0LCAxNzYsIDAsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDIwNiwgMTA1LCAyMywgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMjU1LCA5OSwgMTMyLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSg1NCwgMTYyLCAyMzUsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDEzNiwgMjU1LCAwLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgxNDIsIDQ4LCAxNjAsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIyMiwgMjIwLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDIwNiwgODYsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDc1LCAxOTIsIDE5MiwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMCwgMjM0LCAyMjEsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDE1MywgMTAyLCAyNTUsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDEzOSwgMTI2LCAyNTUsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDE0MiwgNDgsIDE2MCwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTkxLCA2LCA2LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgxNTMsIDEwMiwgMjU1LCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDIwNiwgODYsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDY1LCAxOTYsIDI1NSwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTM3LCAyMDQsIDAsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDAsIDE2OSwgMTksIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDI1NSwgMTU5LCA2NCwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTQyLCA0OCwgMTYwLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDIwNiwgODYsIDAuNSknLFxuICAgICAgICAgICAgICAgICdyZ2JhKDAsIDIyMiwgMjIwLCAwLjUpJyxcbiAgICAgICAgICAgICAgICAncmdiYSgxMzcsIDIwNCwgMCwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTc0LCAxNDAsIDIzMiwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMCwgMTY5LCAxOSwgMC41KScsXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTM3LCAyMDQsIDAsIDAuNSknLFxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcblxuXG4gICAgICAgICAgICB2bS5jaGFydHMgPSBbXTtcblxuXG4gICAgICAgICAgICB2bS5kcmF3Q2hhcnQgPSBmdW5jdGlvbihkaXZJZCwgY2hhcnREYXRhLCBjaGFydE9wdGlvbnMpIHtcblxuICAgICAgICAgICAgICAgIHZhciBERUZBVUxUX0NBTlZBU19IRUlHSFQgPSAzMDA7XG4gICAgICAgICAgICAgICAgdmFyIERFRkFVTFRfQ0FOVkFTX1dJRFRIID0gNDAwO1xuICAgICAgICAgICAgICAgIHZhciBERUZBVUxUX0NIQVJUX1RZUEUgPSAnYmFyJztcblxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNIZWlnaHQgPSAoY2hhcnRPcHRpb25zLmNoYXJ0ICYmIGNoYXJ0T3B0aW9ucy5jaGFydC5oZWlnaHQpIHx8IERFRkFVTFRfQ0FOVkFTX0hFSUdIVDtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzV2lkdGggPSAoY2hhcnRPcHRpb25zLmNoYXJ0ICYmIGNoYXJ0T3B0aW9ucy5jaGFydC53aWR0aCkgfHwgREVGQVVMVF9DQU5WQVNfV0lEVEg7XG4gICAgICAgICAgICAgICAgdmFyIGNoYXJ0VHlwZSA9IChjaGFydE9wdGlvbnMuY2hhcnQgJiYgY2hhcnRPcHRpb25zLmNoYXJ0LnR5cGUpIHx8IERFRkFVTFRfQ0hBUlRfVFlQRTtcblxuICAgICAgICAgICAgICAgIHZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZJZCkuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICAgICAgICAgIGN0eC5jYW52YXMuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xuICAgICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGggPSBjYW52YXNXaWR0aDtcblxuXG5cbiAgICAgICAgICAgICAgICAvKkNoYXJ0LmRlZmF1bHRzLmdsb2JhbC50b29sdGlwcy5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNFQkVCRUJcIjtcbiAgICAgICAgICAgICAgICBDaGFydC5kZWZhdWx0cy5nbG9iYWwudG9vbHRpcHMudGl0bGVGb250Q29sb3IgPSBcIiMwMDBcIjtcbiAgICAgICAgICAgICAgICBDaGFydC5kZWZhdWx0cy5nbG9iYWwudG9vbHRpcHMuYm9keUZvbnRDb2xvciA9IFwiIzAwMFwiOyovXG5cblxuICAgICAgICAgICAgICAgIHZhciBjaGFydCA9IG5ldyBDaGFydChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogY2hhcnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjaGFydERhdGEsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNoYXJ0T3B0aW9uc1xuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAvKlxuXHQgICAgXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgXHRcdHZhciBkYXRhID0gJHdpbmRvdy5teUJhci5jaGFydC5jb25maWcuZGF0YS5kYXRhc2V0c1swXS5kYXRhO1xuXHRcdCAgICBcdFxuXHRcdCAgICBcdGN0eC5mb250ID0gJzIycHggXCJIZWx2ZXRpY2EgTmV1ZVwiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmJztcblx0XHQgICAgXHRjdHguZmlsbFN0eWxlID0gXCIjMDAwXCI7ICAgICAgICBcblx0XHQgICAgXHRjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjsgXG5cdFx0ICAgIFx0Zm9yICh2YXIgaSBpbiBkYXRhKSB7XG5cdFx0ICAgIFx0XHRjdHguZmlsbFRleHQoZGF0YVtpXSwgMjAwLCAxODApO1xuXHRcdCAgICBcdH1cblx0ICAgIFx0fSwgMTAwMCk7XG5cdCAgICBcdFxuXHQgICAgXHRcblx0ICAgIFx0Ki9cblxuICAgICAgICAgICAgICAgIHZtLmNoYXJ0cy5wdXNoKGNoYXJ0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQ7XG5cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2bS5nZW5lcmF0ZUNoYXJ0RGF0YSA9IGZ1bmN0aW9uKHJhd0RhdGEsIHhBeGlzUHJvcCwgeUF4aXNQcm9wLCBkYXRlVHlwZSwgY2hhcnRPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdmFyIERFRkFVTFRfSVNfREFURVRZUEUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgREVGQVVMVF9EQVRBU0VUX0xBQkVMID0gJ3gtYXhpcyc7XG5cbiAgICAgICAgICAgICAgICB2YXIgaXNEYXRldHlwZSA9IGRhdGVUeXBlIHx8IERFRkFVTFRfSVNfREFURVRZUEU7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFzZXRMYWJlbCA9IGNoYXJ0T3B0aW9ucy5kYXRhc2V0TGFiZWwgfHwgREVGQVVMVF9EQVRBU0VUX0xBQkVMO1xuICAgICAgICAgICAgICAgIC8qW3tcblx0ICAgICAgICBcdCAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXG5cdCAgICAgICAgXHQgIHV0aWxpemF0aW9uOiAyMy40NCxcblx0ICAgICAgICBcdCAgbG9jYXRpb246ICdBTEwnXG5cdCAgICAgICAgICB9LHtcblx0ICAgICAgICBcdCAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXG5cdCAgICAgICAgXHQgIHV0aWxpemF0aW9uOiAyMy40NCxcblx0ICAgICAgICBcdCAgbG9jYXRpb246ICdBTEwnXG5cdCAgICAgICAgICB9LHtcblx0ICAgICAgICBcdCAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXG5cdCAgICAgICAgXHQgIHV0aWxpemF0aW9uOiAyMy40NCxcblx0ICAgICAgICBcdCAgbG9jYXRpb246ICdBTEwnXG5cdCAgICAgICAgICB9XTtcblx0ICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAvKntcblx0ICAgICAgICAgICAgICBsYWJlbHM6IFtcIkphbnVhcnlcIiwgXCJGZWJydWFyeVwiLCBcIk1hcmNoXCIsIFwiQXByaWxcIiwgXCJNYXlcIiwgXCJKdW5lXCIsIFwiSnVseVwiXSxcblx0ICAgICAgICAgICAgICBkYXRhc2V0czogW3tcblx0ICAgICAgICAgICAgICAgICAgbGFiZWw6ICdEYXRhc2V0IDEnLFxuXHQgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgyMjAsMjIwLDIyMCwwLjUpXCIsXG5cdCAgICAgICAgICAgICAgICAgIGRhdGE6IFszNCwgMzQsIDY2LCAyLCA2LCAyMywgN11cblx0ICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRGF0YXNldCAyJyxcblx0ICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMTUxLDE4NywyMDUsMC41KVwiLFxuXHQgICAgICAgICAgICAgICAgICBkYXRhOiBbNywgMjksIDk5LCA2NywgODMsIDY2LCA5NF1cblx0ICAgICAgICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRGF0YXNldCAzJyxcblx0ICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMTUxLDE4NywyMDUsMC41KVwiLFxuXHQgICAgICAgICAgICAgICAgICBkYXRhOiBbMjMsIDQ0LCA1NSwgNjgsIDM0LCA1LCAyXVxuXHQgICAgICAgICAgICAgIH1dXG5cblx0ICAgICAgICAgIH07Ki9cblxuICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0cyA9IFtdO1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgbGFiZWxzID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHJhd0RhdGEuY29uc3RydWN0b3IgIT09IEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0TmFtZXMgPSBPYmplY3Qua2V5cyhyYXdEYXRhKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGRhdGFzZXROYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0RhdGFzZXQgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0uZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0uYmFja2dyb3VuZENvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGwgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0uZmlsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5lQ29sb3IgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0ubGluZUNvbG9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzZXRMYWJlbCA9IHJhd0RhdGFbZGF0YXNldE5hbWVzW2ldXS5sYWJlbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiByYXdEYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcmF3RGF0YXNldFtqXVt4QXhpc1Byb3BdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gaXNEYXRldHlwZSA9PSB0cnVlID8gZGF0ZVRvTW9udGgobmV3IERhdGUobGFiZWwpKSA6IGxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dGlsaXphdGlvbiA9IHJhd0RhdGFzZXRbal1beUF4aXNQcm9wXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChsYWJlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHV0aWxpemF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRhdGFzZXRMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IGZpbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGxpbmVDb2xvclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaChkYXRhc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3JzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcmF3RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcmF3RGF0YVtpXVt4QXhpc1Byb3BdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBpc0RhdGV0eXBlID09IHRydWUgPyBkYXRlVG9Nb250aChuZXcgRGF0ZShsYWJlbCkpIDogbGFiZWw7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXRpbGl6YXRpb24gPSByYXdEYXRhW2ldW3lBeGlzUHJvcF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmF3RGF0YVtpXS5iYWNrZ3JvdW5kQ29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JzLnB1c2gocmF3RGF0YVtpXS5iYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzLnB1c2gobGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHV0aWxpemF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRhdGFzZXRMYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2JhY2tncm91bmRDb2xvcjogJ3JnYmEoMTMyLCAyMzEsIDIyMSwgMC44KSdcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9ycy5sZW5ndGggPiAwID8gYmFja2dyb3VuZENvbG9ycyA6IENPTE9SUyxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0cy5wdXNoKGRhdGFzZXQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qdmFyIGRhdGEgPSBbXTtcblx0ICAgIFx0Zm9yICh2YXIgaSBpbiByYXdEYXRhKSB7XG5cdCAgICBcdFx0dmFyIGxhYmVsID0gcmF3RGF0YVtpXVt4QXhpc1Byb3BdO1xuXHQgICAgXHRcdGxhYmVsID0gaXNEYXRldHlwZSA9PSB0cnVlID8gZGF0ZVRvTW9udGgobmV3IERhdGUobGFiZWwpKSA6IGxhYmVsO1xuXHQgICAgXHRcdHZhciB1dGlsaXphdGlvbiA9IHJhd0RhdGFbaV1beUF4aXNQcm9wXTtcblx0ICAgIFx0XHRsYWJlbHMucHVzaChsYWJlbCk7XG5cdCAgICBcdFx0ZGF0YS5wdXNoKHV0aWxpemF0aW9uKTtcblx0ICAgIFx0fVxuXHQgICAgXHRcblx0ICAgIFx0dmFyIGRhdGFzZXQgPSB7XG5cdFx0XHRcdGxhYmVsOiAnVXRpbGl6YXRpb24nLFxuXHRcdFx0XHRkYXRhOiBkYXRhLFxuICAgXHRcdFx0ICAgIGJhY2tncm91bmRDb2xvcjogXCJyZ2JhKDgsIDIwNiwgMTg1LCAwLjUpXCJcblx0XHRcdH1cblx0XHRcdGRhdGFzZXRzLnB1c2goZGF0YXNldCk7Ki9cblxuICAgICAgICAgICAgICAgIHZhciB0cnVuY2F0ZWRMYWJlbHMgPSBsYWJlbHM7XG4gICAgICAgICAgICAgICAgLyppZiAobGFiZWxzLmxlbmd0aCA+IDE1KSB7XG5cdCAgICBcdFx0dHJ1bmNhdGVkTGFiZWxzID0gW107XG5cdCAgICBcdFx0Zm9yICh2YXIgaSBpbiBsYWJlbHMpIHtcblx0ICAgIFx0XHRcdHZhciBmaW5hbFN0ciA9IHRydW5jYXRlU3RyaW5nKGxhYmVsc1tpXSwgNik7XG5cdCAgICBcdFx0XHRpZiAobGFiZWxzW2ldLmxlbmd0aCA+IDYpIFxuXHQgICAgXHRcdFx0XHRmaW5hbFN0ciA9IGZpbmFsU3RyICsgJy4uJztcblx0ICAgIFx0XHRcdFxuXHRcdCAgICBcdFx0dHJ1bmNhdGVkTGFiZWxzLnB1c2goZmluYWxTdHIpO1xuXHRcdCAgICBcdH1cblx0ICAgIFx0fVxuXHQgICAgXHQqL1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoYXJ0RGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxzOiAkLnVuaXF1ZSh0cnVuY2F0ZWRMYWJlbHMpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0czogZGF0YXNldHNcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnREYXRhO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobGFiZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmluYWxMYWJlbCA9IGxhYmVsLnN1YnN0cigwLCAxKS50b1VwcGVyQ2FzZSgpICsgbGFiZWwuc3Vic3RyKDEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmaW5hbExhYmVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB0cnVuY2F0ZVN0cmluZyhsYWJlbCwgbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsLnN1YnN0cigwLCBsZW5ndGgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBjdXN0b21pemVUb29sdGlwKGNoYXJ0RGF0YSkge1xuXG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgZnVuY3Rpb24gZGF0ZVRvTW9udGgoZGF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciBNT05USFMgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XG4gICAgICAgICAgICAgICAgdmFyIG1vbnRoID0gTU9OVEhTW2RhdGUuZ2V0TW9udGgoKV07XG4gICAgICAgICAgICAgICAgdmFyIHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbW9udGggKyAnICcgKyB5ZWFyO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuICAgIF0pO1xufSkoKTtcbiJdfQ==
