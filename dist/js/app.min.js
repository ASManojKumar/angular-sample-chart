var app=angular.module("sample",[]);angular.module("sample").controller("firstController",["$scope","createChartService",function(a,t){function e(a){var t={},e=[],r=[],l=[];for(var n in a){var o=a[n].utilizationDate,i=a[n],c=0,s=0,u=0;"india"==i.utilizationLocation.toLowerCase()?(c=i.utilizationValue,r.push({date:o,utilization:c})):"us"==i.utilizationLocation.toLowerCase()?(s=i.utilizationValue,e.push({date:o,utilization:s})):"overall"==i.utilizationLocation.toLowerCase()&&(u=i.utilizationValue,l.push({date:o,utilization:u}))}return t.India={label:"India",data:r,lineColor:"rgb(253, 154, 55)",fill:!1},t.US={label:"US",data:e,lineColor:"rgb(90, 172, 239)",fill:!1},t.Overall={label:"Overall",data:l,lineColor:"gray",fill:!1},t}function r(t){var r=t.data.response;r.successObject&&(a.utilizationChartData=e(r.successObject))}function l(t){var e=t.data.response;if(e.successObject){var r=[];for(var l in e.successObject)r.push(e.successObject[l]);a.peopleList=r,a.benchPieChartData=n(a.peopleList);var o=0,i=0;for(var l in r)"Bangalore"==r[l].location||"Noida"==r[l].location?o++:"US"!=r[l].location&&"Santa Clara"!=r[l].location||i++}}function n(a){for(var t=[],t=[{label:"Kannada",count:0},{label:"Tamil",count:0},{label:"Telugu",count:0},{label:"Others",count:0}],e=0;e<a.length;e++)a[e].stateName==c[0]?t[0].count=t[0].count+1:a[e].stateName==c[1]?t[1].count=t[1].count+1:a[e].stateName==c[2]?t[2].count=t[2].count+1:t[3].count=t[3].count+1;return t}function o(a){console.error("ERROR: Failed in XHR : "+a)}function i(){a.loading=!1}var c={0:"Kannada",1:"Tamil",2:"Telugu",3:"Others"};!function(){a.loading=!0,t.getChartData().then(r,o).finally(i)}(),function(){a.loading=!0,t.getPieChartData().then(l,o).finally(i)}()}]);var app=angular.module("sample");angular.module("sample").directive("chart",["chartsService",function(a){function t(t,e,r){var l=this;if(l.max=0,console.log(t),"pie"!=t.chartType)var n={id:t.id,datasetLabel:t.datasetLabel,datalabels:!0,maintainAspectRatio:!1,zoom:{enabled:!1,mode:"xy"},pan:{enabled:!1,mode:"xy"},chart:{height:300,type:t.chartType},responsive:!0,legend:{display:t.legendDisplay,position:"bottom"},title:{display:!1,text:"Chart.js Bar Chart"},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:t.hScaleLabel,fontColor:"#000",fontSize:16}}],yAxes:[{display:!0,ticks:{beginAtZero:!t.yScaleMin,min:t.yScaleMin,max:t.yScaleMax,callback:function(a,e,r){return l.max<a&&(l.max=a),a+t.yScaleSuffix}},scaleLabel:{display:!0,labelString:t.yScaleLabel,fontColor:"#000",fontSize:16}}]},showTooltips:!1,tooltipTemplate:"<%= value %>",tooltips:{callbacks:{title:function(a,t){return a[0].xLabel+" : "+a[0].yLabel},label:function(a,t){t.datasets[a.datasetIndex].label;return""}}}};else if(t.chartType="pie")var n={id:t.id,datasetLabel:t.datasetLabel,chartData:t.chartData,datalabels:!0,maintainAspectRatio:!1,zoom:{enabled:!1,mode:"xy"},pan:{enabled:!1,mode:"xy"},chart:{height:300,type:t.chartType},responsive:!0,legend:{display:t.legendDisplay,position:"bottom"},title:{display:!1,text:"Chart.js Pie Chart"},showTooltips:!0,tooltipTemplate:"<%= value %>"};t.$watchCollection("chartData",function(e,o){if(e){var i=a.generateChartData(t.chartData,t.hAxisProp,t.yAxisProp,JSON.parse(t.dateType),n),c=i.datasets,s=[];for(var u in c)s=s.concat(c[u].data);l.max=s[0];for(var d in s)l.max<s[d]&&(l.max=s[d]);var b=a.drawChart(r.id,i,n);if(b&&"Profitability GM YTD"===b.options.datasetLabel){var h=b.chart.ctx;h.canvas.onclick=function(a){var e=b.getElementsAtEvent(a);console.log(e),t.$emit("datapointClick",e)}}if(b&&"BenchSkillBarChart"===b.options.datasetLabel){var h=b.chart.ctx;h.canvas.onclick=function(a){var e=b.getElementsAtEvent(a);t.$emit("benchBarChartClick",e)}}if(b&&"BenchSkillPieChart"===b.options.datasetLabel){var h=b.chart.ctx;h.canvas.onclick=function(a){var e=b.getElementsAtEvent(a);t.$emit("benchPieChartClick",e)}}if(b&&"PracticeInputBarChart"===b.options.datasetLabel){var h=b.chart.ctx;h.canvas.onclick=function(a){var e=b.getElementsAtEvent(a);t.$emit("practiceBarChartClick",e)}}console.log(b)}})}function e(){}return{restrict:"E",template:"<canvas></canvas>",replace:!0,link:t,controller:e,scope:{id:"=",chartData:"=?",chartType:"=?",hAxisProp:"=?",yAxisProp:"=?",dateType:"=?",datasetLabel:"=?",legendDisplay:"@",yScaleSuffix:"@",hScaleLabel:"@",yScaleLabel:"@",yScaleMin:"@",yScaleMax:"@"}}}]),function(){"use strict";angular.module("sample");angular.module("sample").directive("firstOne",function(){return{restrict:"EA",bindToController:!0,controller:"firstController",controllerAs:"first",replace:!0,templateUrl:"index.html"}})}(),function(){angular.module("sample").service("chartsService",["$http","$rootScope","$window",function(a,t,e){function r(a){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+" "+a.getFullYear()}var l=["rgba(0, 234, 221, 0.5)","rgba(232, 140, 209, 0.5)","rgba(174, 140, 232, 0.5)","rgba(0, 169, 19, 0.5)","rgba(137, 204, 0, 0.5)","rgba(204, 176, 0, 0.5)","rgba(206, 105, 23, 0.5)","rgba(255, 99, 132, 0.5)","rgba(54, 162, 235, 0.5)","rgba(136, 255, 0, 0.5)","rgba(142, 48, 160, 0.5)","rgba(0, 222, 220, 0.5)","rgba(255, 206, 86, 0.5)","rgba(75, 192, 192, 0.5)","rgba(0, 234, 221, 0.5)","rgba(153, 102, 255, 0.5)","rgba(139, 126, 255, 0.5)","rgba(142, 48, 160, 0.5)","rgba(191, 6, 6, 0.5)","rgba(153, 102, 255, 0.5)","rgba(255, 206, 86, 0.5)","rgba(65, 196, 255, 0.5)","rgba(137, 204, 0, 0.5)","rgba(0, 169, 19, 0.5)","rgba(255, 159, 64, 0.5)","rgba(142, 48, 160, 0.5)","rgba(255, 206, 86, 0.5)","rgba(0, 222, 220, 0.5)","rgba(137, 204, 0, 0.5)","rgba(174, 140, 232, 0.5)","rgba(0, 169, 19, 0.5)","rgba(137, 204, 0, 0.5)"],n=this;n.charts=[],n.drawChart=function(a,t,e){var r=e.chart&&e.chart.height||300,l=e.chart&&e.chart.width||400,o=e.chart&&e.chart.type||"bar",i=document.getElementById(a).getContext("2d");i.canvas.height=r,i.canvas.width=l;var c=new Chart(i,{type:o,data:t,options:e});return n.charts.push(c),c},n.generateChartData=function(a,t,e,n,o){var i=n||!1,c=o.datasetLabel||"x-axis",s=[],u=[];if(a.constructor!==Array){var d=Object.keys(a);for(var b in d){var h=a[d[b]].data,p=a[d[b]].backgroundColor,g=a[d[b]].fill,v=a[d[b]].lineColor,c=a[d[b]].label,f=[];for(var m in h){var y=h[m][t];y=1==i?r(new Date(y)):y;var C=h[m][e];u.push(y),f.push(C)}var x={label:c,data:f,backgroundColor:p,fill:g,borderColor:v};s.push(x)}}else{var f=[],S=[];for(var b in a){var y=a[b][t];y=1==i?r(new Date(y)):y;var C=a[b][e];a[b].backgroundColor&&S.push(a[b].backgroundColor),null!==y&&u.push(y),f.push(C)}var x={label:c,data:f,backgroundColor:S.length>0?S:l};s.push(x)}var L=u;return{labels:$.unique(L),datasets:s}}}])}(),angular.module("sample").factory("createChartService",["$http",function(a){var t={};return t.getChartData=function(){return a.get("json/data.json")},t.getPieChartData=function(){return a.get("json/dataForPie.json")},t}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2NoYXJ0LmNvbnRyb2xsZXIuanMiLCJkaXJlY3RpdmVzL2NoYXJ0LmpzIiwiZGlyZWN0aXZlcy9zYW1wbGUuanMiLCJzZXJ2aWNlcy9jaGFydC5zZXJ2aWNlLmpzIiwic2VydmljZXMvY2hhcnRTZXJ2aWNlLnNlcnZpY2UuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCJjcmVhdGVDaGFydFNlcnZpY2UiLCJnZW5lcmF0ZVV0aWxpemF0aW9uQ2hhcnREYXRhIiwidXRpbGl6YXRpb25zIiwidXRpbGl6YXRpb25DaGFydERhdGEiLCJ1dGlsaXphdGlvblVTIiwidXRpbGl6YXRpb25JbmRpYSIsInV0aWxpemF0aW9uT3ZlcmFsbCIsImkiLCJkYXRlIiwidXRpbGl6YXRpb25EYXRlIiwidXRpbGl6YXRpb24iLCJ1dElOIiwidXRVUyIsInV0QUxMIiwidXRpbGl6YXRpb25Mb2NhdGlvbiIsInRvTG93ZXJDYXNlIiwidXRpbGl6YXRpb25WYWx1ZSIsInB1c2giLCJJbmRpYSIsImxhYmVsIiwiZGF0YSIsImxpbmVDb2xvciIsImZpbGwiLCJVUyIsIk92ZXJhbGwiLCJ1dGlsaXphdGlvbkxpc3RTdWNjZXNzSGFuZGxlciIsInJlc3BvbnNlIiwicmVzdWx0Iiwic3VjY2Vzc09iamVjdCIsImdldEJlbmNoRW1wbG95ZWVzU3VjY2Vzc0hhbmRsZXIiLCJwZW9wbGVMaXN0IiwiYmVuY2hQaWVDaGFydERhdGEiLCJnZW5lcmF0ZUJlbmNoUGllQ2hhcnQiLCJpbmRpYUNvdW50IiwidXNDb3VudCIsImxvY2F0aW9uIiwicGllQ2hhcnREYXRhIiwiY291bnQiLCJsZW5ndGgiLCJzdGF0ZU5hbWUiLCJzdGF0ZU9iaiIsImZhaWx1cmVIYW5kbGVyIiwiZXJyb3IiLCJjb25zb2xlIiwiZmluYWxseUhhbmRsZXIiLCJsb2FkaW5nIiwiMCIsIjEiLCIyIiwiMyIsImdldENoYXJ0RGF0YSIsInRoZW4iLCJmaW5hbGx5IiwiZ2V0UGllQ2hhcnREYXRhIiwiZGlyZWN0aXZlIiwiY2hhcnRzU2VydmljZSIsImNoYXJ0TGlua2VyIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJzZWxmIiwidGhpcyIsIm1heCIsImxvZyIsImNoYXJ0VHlwZSIsImNoYXJ0T3B0aW9ucyIsImlkIiwiZGF0YXNldExhYmVsIiwiZGF0YWxhYmVscyIsIm1haW50YWluQXNwZWN0UmF0aW8iLCJ6b29tIiwiZW5hYmxlZCIsIm1vZGUiLCJwYW4iLCJjaGFydCIsImhlaWdodCIsInR5cGUiLCJyZXNwb25zaXZlIiwibGVnZW5kIiwiZGlzcGxheSIsImxlZ2VuZERpc3BsYXkiLCJwb3NpdGlvbiIsInRpdGxlIiwidGV4dCIsInNjYWxlcyIsInhBeGVzIiwic2NhbGVMYWJlbCIsImxhYmVsU3RyaW5nIiwiaFNjYWxlTGFiZWwiLCJmb250Q29sb3IiLCJmb250U2l6ZSIsInlBeGVzIiwidGlja3MiLCJiZWdpbkF0WmVybyIsInlTY2FsZU1pbiIsIm1pbiIsInlTY2FsZU1heCIsImNhbGxiYWNrIiwiaW5kZXgiLCJsYWJlbHMiLCJ5U2NhbGVTdWZmaXgiLCJ5U2NhbGVMYWJlbCIsInNob3dUb29sdGlwcyIsInRvb2x0aXBUZW1wbGF0ZSIsInRvb2x0aXBzIiwiY2FsbGJhY2tzIiwidG9vbHRpcEl0ZW0iLCJ4TGFiZWwiLCJ5TGFiZWwiLCJkYXRhc2V0cyIsImRhdGFzZXRJbmRleCIsImNoYXJ0RGF0YSIsIiR3YXRjaENvbGxlY3Rpb24iLCJuZXdWYWwiLCJvbGRWYWwiLCJnZW5lcmF0ZUNoYXJ0RGF0YSIsImhBeGlzUHJvcCIsInlBeGlzUHJvcCIsIkpTT04iLCJwYXJzZSIsImRhdGVUeXBlIiwiY29uY2F0IiwiaiIsImRyYXdDaGFydCIsIm9wdGlvbnMiLCJjdHgiLCJjYW52YXMiLCJvbmNsaWNrIiwiZXZ0IiwiYWN0aXZlUG9pbnRzIiwiZ2V0RWxlbWVudHNBdEV2ZW50IiwiJGVtaXQiLCJjaGFydENvbnRyb2xsZXIiLCJyZXN0cmljdCIsInRlbXBsYXRlIiwicmVwbGFjZSIsImxpbmsiLCJiaW5kVG9Db250cm9sbGVyIiwiY29udHJvbGxlckFzIiwidGVtcGxhdGVVcmwiLCJzZXJ2aWNlIiwiJGh0dHAiLCIkcm9vdFNjb3BlIiwiJHdpbmRvdyIsImRhdGVUb01vbnRoIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsIkNPTE9SUyIsInZtIiwiY2hhcnRzIiwiZGl2SWQiLCJjYW52YXNIZWlnaHQiLCJjYW52YXNXaWR0aCIsIndpZHRoIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldENvbnRleHQiLCJDaGFydCIsInJhd0RhdGEiLCJ4QXhpc1Byb3AiLCJpc0RhdGV0eXBlIiwiY29uc3RydWN0b3IiLCJBcnJheSIsImRhdGFzZXROYW1lcyIsIk9iamVjdCIsImtleXMiLCJyYXdEYXRhc2V0IiwiYmFja2dyb3VuZENvbG9yIiwiRGF0ZSIsImRhdGFzZXQiLCJib3JkZXJDb2xvciIsImJhY2tncm91bmRDb2xvcnMiLCJ0cnVuY2F0ZWRMYWJlbHMiLCIkIiwidW5pcXVlIiwiZmFjdG9yeSIsImdldCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBQUEsS0FBQUMsUUFBQUMsT0FBQSxZQUVBRCxTQUFBQyxPQUFBLFVBQUFDLFdBQUEsbUJBQUEsU0FBQSxxQkFDQSxTQUFBQyxFQUFBQyxHQU1BLFFBQUFDLEdBQUFDLEdBRUEsR0FBQUMsTUFDQUMsS0FDQUMsS0FDQUMsSUFFQSxLQUFBLEdBQUFDLEtBQUFMLEdBQUEsQ0FDQSxHQUFBTSxHQUFBTixFQUFBSyxHQUFBRSxnQkFDQUMsRUFBQVIsRUFBQUssR0FDQUksRUFBQSxFQUNBQyxFQUFBLEVBQ0FDLEVBQUEsQ0FDQSxVQUFBSCxFQUFBSSxvQkFBQUMsZUFDQUosRUFBQUQsRUFBQU0saUJBQ0FYLEVBQUFZLE1BQ0FULEtBQUFBLEVBQ0FFLFlBQUFDLEtBR0EsTUFBQUQsRUFBQUksb0JBQUFDLGVBQ0FILEVBQUFGLEVBQUFNLGlCQUNBWixFQUFBYSxNQUNBVCxLQUFBQSxFQUNBRSxZQUFB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R0FBQTRKLEVBQUE1QyxHQUFBTCxFQUNBbEIsR0FBQWxGLEtBQUFFLEdBQ0FDLEVBQUFILEtBQUFQLEdBR0EsR0FBQStKLElBQ0F0SixNQUFBZ0QsRUFDQS9DLEtBQUFBLEVBQ0FtSixnQkFBQUEsRUFDQWpKLEtBQUFBLEVBQ0FvSixZQUFBckosRUFFQXdGLEdBQUE1RixLQUFBd0osUUFFQSxDQUNBLEdBQUFySixNQUNBdUosSUFDQSxLQUFBLEdBQUFwSyxLQUFBdUosR0FBQSxDQUNBLEdBQUEzSSxHQUFBMkksRUFBQXZKLEdBQUF3SixFQUNBNUksR0FBQSxHQUFBNkksRUFBQWhCLEVBQUEsR0FBQXdCLE1BQUFySixJQUFBQSxDQUNBLElBQUFULEdBQUFvSixFQUFBdkosR0FBQThHLEVBQ0F5QyxHQUFBdkosR0FBQWdLLGlCQUNBSSxFQUFBMUosS0FBQTZJLEVBQUF2SixHQUFBZ0ssaUJBRUEsT0FBQXBKLEdBQ0FnRixFQUFBbEYsS0FBQUUsR0FFQUMsRUFBQUgsS0FBQVAsR0FHQSxHQUFBK0osSUFDQXRKLE1BQUFnRCxFQUNBL0MsS0FBQUEsRUFFQW1KLGdCQUFBSSxFQUFBckksT0FBQSxFQUFBcUksRUFBQXhCLEVBRUF0QyxHQUFBNUYsS0FBQXdKLEdBbUJBLEdBQUFHLEdBQUF6RSxDQWtCQSxRQUpBQSxPQUFBMEUsRUFBQUMsT0FBQUYsR0FDQS9ELFNBQUFBLFVDL05BakgsUUFBQUMsT0FBQSxVQUNBa0wsUUFBQSxzQkFBQSxRQUFBLFNBQUFsQyxHQUVBLEdBQUE5QixLQU9BLE9BTkFBLEdBQUE3RCxhQUFBLFdBQ0EsTUFBQTJGLEdBQUFtQyxJQUFBLG1CQUVBakUsRUFBQTFELGdCQUFBLFdBQ0EsTUFBQXdGLEdBQUFtQyxJQUFBLHlCQUVBakUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnc2FtcGxlJywgW10pO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3NhbXBsZScpLmNvbnRyb2xsZXIoJ2ZpcnN0Q29udHJvbGxlcicsIFsnJHNjb3BlJywgJ2NyZWF0ZUNoYXJ0U2VydmljZScsXHJcbiAgICBmdW5jdGlvbigkc2NvcGUsIGNyZWF0ZUNoYXJ0U2VydmljZSkge1xyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZhciBzdGF0ZU9iaiA9IHsgMDogXCJLYW5uYWRhXCIsIDE6IFwiVGFtaWxcIiwgMjogXCJUZWx1Z3VcIiwgMzogXCJPdGhlcnNcIiB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZW5lcmF0ZVV0aWxpemF0aW9uQ2hhcnREYXRhKHV0aWxpemF0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgdmFyIHV0aWxpemF0aW9uQ2hhcnREYXRhID0ge307XHJcbiAgICAgICAgICAgIHZhciB1dGlsaXphdGlvblVTID0gW107XHJcbiAgICAgICAgICAgIHZhciB1dGlsaXphdGlvbkluZGlhID0gW107XHJcbiAgICAgICAgICAgIHZhciB1dGlsaXphdGlvbk92ZXJhbGwgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gdXRpbGl6YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IHV0aWxpemF0aW9uc1tpXS51dGlsaXphdGlvbkRhdGU7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXRpbGl6YXRpb24gPSB1dGlsaXphdGlvbnNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgdXRJTiA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXRVUyA9IDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXRBTEwgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKHV0aWxpemF0aW9uLnV0aWxpemF0aW9uTG9jYXRpb24udG9Mb3dlckNhc2UoKSA9PSAnaW5kaWEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRJTiA9IHV0aWxpemF0aW9uLnV0aWxpemF0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbGl6YXRpb25JbmRpYS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbGl6YXRpb246IHV0SU5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHV0aWxpemF0aW9uLnV0aWxpemF0aW9uTG9jYXRpb24udG9Mb3dlckNhc2UoKSA9PSAndXMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRVUyA9IHV0aWxpemF0aW9uLnV0aWxpemF0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbGl6YXRpb25VUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXRpbGl6YXRpb246IHV0VVNcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHV0aWxpemF0aW9uLnV0aWxpemF0aW9uTG9jYXRpb24udG9Mb3dlckNhc2UoKSA9PSAnb3ZlcmFsbCcpIHtcclxuICAgICAgICAgICAgICAgICAgICB1dEFMTCA9IHV0aWxpemF0aW9uLnV0aWxpemF0aW9uVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbGl6YXRpb25PdmVyYWxsLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBkYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1dGlsaXphdGlvbjogdXRBTExcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHV0aWxpemF0aW9uQ2hhcnREYXRhLkluZGlhID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdJbmRpYScsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB1dGlsaXphdGlvbkluZGlhLFxyXG4gICAgICAgICAgICAgICAgbGluZUNvbG9yOiAncmdiKDI1MywgMTU0LCA1NSknLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHV0aWxpemF0aW9uQ2hhcnREYXRhLlVTID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdVUycsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB1dGlsaXphdGlvblVTLFxyXG4gICAgICAgICAgICAgICAgbGluZUNvbG9yOiAncmdiKDkwLCAxNzIsIDIzOSknLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHV0aWxpemF0aW9uQ2hhcnREYXRhLk92ZXJhbGwgPSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbDogJ092ZXJhbGwnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogdXRpbGl6YXRpb25PdmVyYWxsLFxyXG4gICAgICAgICAgICAgICAgbGluZUNvbG9yOiAnZ3JheScsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHV0aWxpemF0aW9uQ2hhcnREYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXRpbGl6YXRpb25MaXN0U3VjY2Vzc0hhbmRsZXIocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3BvbnNlLmRhdGEucmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzc09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLnV0aWxpemF0aW9uQ2hhcnREYXRhID0gZ2VuZXJhdGVVdGlsaXphdGlvbkNoYXJ0RGF0YShyZXN1bHQuc3VjY2Vzc09iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFV0aWx6YXRpb24oKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3JlYXRlQ2hhcnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuZ2V0Q2hhcnREYXRhKClcclxuICAgICAgICAgICAgICAgIC50aGVuKHV0aWxpemF0aW9uTGlzdFN1Y2Nlc3NIYW5kbGVyLCBmYWlsdXJlSGFuZGxlcilcclxuICAgICAgICAgICAgICAgIC5maW5hbGx5KGZpbmFsbHlIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldEFsbFV0aWx6YXRpb24oKTtcclxuXHJcbiAgICAgICAgZ2V0UGllQ2hhcnQoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGllQ2hhcnQoKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgY3JlYXRlQ2hhcnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuZ2V0UGllQ2hhcnREYXRhKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGdldEJlbmNoRW1wbG95ZWVzU3VjY2Vzc0hhbmRsZXIsIGZhaWx1cmVIYW5kbGVyKVxyXG4gICAgICAgICAgICAgICAgLmZpbmFsbHkoZmluYWxseUhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QmVuY2hFbXBsb3llZXNTdWNjZXNzSGFuZGxlcihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzcG9uc2UuZGF0YS5yZXNwb25zZTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGVvcGxlTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByZXN1bHQuc3VjY2Vzc09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlb3BsZUxpc3QucHVzaChyZXN1bHQuc3VjY2Vzc09iamVjdFtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUucGVvcGxlTGlzdCA9IHBlb3BsZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYmVuY2hQaWVDaGFydERhdGEgPSBnZW5lcmF0ZUJlbmNoUGllQ2hhcnQoJHNjb3BlLnBlb3BsZUxpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpbmRpYUNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB1c0NvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcGVvcGxlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZW9wbGVMaXN0W2ldLmxvY2F0aW9uID09ICdCYW5nYWxvcmUnIHx8IHBlb3BsZUxpc3RbaV0ubG9jYXRpb24gPT0gJ05vaWRhJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpYUNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW9wbGVMaXN0W2ldLmxvY2F0aW9uID09ICdVUycgfHwgcGVvcGxlTGlzdFtpXS5sb2NhdGlvbiA9PSAnU2FudGEgQ2xhcmEnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzQ291bnQrKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHBlb3BsZUNvdW50RGF0YSA9IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246ICdJbmRpYScsXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6IGluZGlhQ291bnRcclxuICAgICAgICAgICAgICAgIH0sIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbjogJ1VTJyxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogdXNDb3VudFxyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVCZW5jaFBpZUNoYXJ0KHBlb3BsZUxpc3QpIHtcclxuICAgICAgICAgICAgZGVidWdnZXJcclxuICAgICAgICAgICAgdmFyIHBpZUNoYXJ0RGF0YSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgcGllQ2hhcnREYXRhID0gW3sgXCJsYWJlbFwiOiBcIkthbm5hZGFcIiwgXCJjb3VudFwiOiAwIH0sIHsgXCJsYWJlbFwiOiBcIlRhbWlsXCIsIFwiY291bnRcIjogMCB9LCB7IFwibGFiZWxcIjogXCJUZWx1Z3VcIiwgXCJjb3VudFwiOiAwIH0sIHsgXCJsYWJlbFwiOiBcIk90aGVyc1wiLCBcImNvdW50XCI6IDAgfV07XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBlb3BsZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChwZW9wbGVMaXN0W2ldLnN0YXRlTmFtZSA9PSBzdGF0ZU9ialswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpZUNoYXJ0RGF0YVswXVtcImNvdW50XCJdID0gcGllQ2hhcnREYXRhWzBdW1wiY291bnRcIl0gKyAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW9wbGVMaXN0W2ldLnN0YXRlTmFtZSA9PSBzdGF0ZU9ialsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpZUNoYXJ0RGF0YVsxXVtcImNvdW50XCJdID0gcGllQ2hhcnREYXRhWzFdW1wiY291bnRcIl0gKyAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW9wbGVMaXN0W2ldLnN0YXRlTmFtZSA9PSBzdGF0ZU9ialsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBpZUNoYXJ0RGF0YVsyXVtcImNvdW50XCJdID0gcGllQ2hhcnREYXRhWzJdW1wiY291bnRcIl0gKyAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwaWVDaGFydERhdGFbM11bXCJjb3VudFwiXSA9IHBpZUNoYXJ0RGF0YVszXVtcImNvdW50XCJdICsgMTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBpZUNoYXJ0RGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZhaWx1cmVIYW5kbGVyKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0VSUk9SOiBGYWlsZWQgaW4gWEhSIDogJyArIGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmFsbHlIYW5kbGVyKCkge1xyXG4gICAgICAgICAgICAkc2NvcGUubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbl0pO1xyXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3NhbXBsZScpO1xyXG5hbmd1bGFyLm1vZHVsZSgnc2FtcGxlJylcclxuICAgIC5kaXJlY3RpdmUoJ2NoYXJ0JywgWydjaGFydHNTZXJ2aWNlJyxcclxuICAgICAgICBmdW5jdGlvbihjaGFydHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8Y2FudmFzPjwvY2FudmFzPicsXHJcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGluazogY2hhcnRMaW5rZXIsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBjaGFydENvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICBzY29wZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnPScsXHJcbiAgICAgICAgICAgICAgICAgICAgY2hhcnREYXRhOiAnPT8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXJ0VHlwZTogJz0/JyxcclxuICAgICAgICAgICAgICAgICAgICBoQXhpc1Byb3A6ICc9PycsXHJcbiAgICAgICAgICAgICAgICAgICAgeUF4aXNQcm9wOiAnPT8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVUeXBlOiAnPT8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXRMYWJlbDogJz0/JyxcclxuICAgICAgICAgICAgICAgICAgICBsZWdlbmREaXNwbGF5OiAnQCcsXHJcbiAgICAgICAgICAgICAgICAgICAgeVNjYWxlU3VmZml4OiAnQCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaFNjYWxlTGFiZWw6ICdAJyxcclxuICAgICAgICAgICAgICAgICAgICB5U2NhbGVMYWJlbDogJ0AnLFxyXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZU1pbjogJ0AnLFxyXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZU1heDogJ0AnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhcnRMaW5rZXIoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5tYXggPSAwO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNjb3BlLmNoYXJ0VHlwZSAhPSBcInBpZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNjb3BlLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0TGFiZWw6IHNjb3BlLmRhdGFzZXRMYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YWxhYmVsczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFpbnRhaW5Bc3BlY3RSYXRpbzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qb25DbGljazogZnVuY3Rpb24oZSwgbywgZikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdkYXRhcG9pbnRDbGljaycsIG8pO1xyXG4gICAgICAgICAgICAgICAgICB9LCovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3h5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFuOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICd4eSdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc2NvcGUuY2hhcnRUeXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qZWxlbWVudHM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3RhbmdsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnYmxhY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclNraXBwZWQ6ICdib3R0b20nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBzY29wZS5sZWdlbmREaXNwbGF5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQ2hhcnQuanMgQmFyIENoYXJ0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY2FsZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhBeGVzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVMYWJlbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbFN0cmluZzogc2NvcGUuaFNjYWxlTGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRDb2xvcjogJyMwMDAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlBeGVzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW5BdFplcm86IHNjb3BlLnlTY2FsZU1pbiA/IGZhbHNlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiBzY29wZS55U2NhbGVNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogc2NvcGUueVNjYWxlTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24obGFiZWwsIGluZGV4LCBsYWJlbHMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5tYXggPCBsYWJlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1heCA9IGxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsICsgc2NvcGUueVNjYWxlU3VmZml4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2FsZUxhYmVsOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsU3RyaW5nOiBzY29wZS55U2NhbGVMYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udENvbG9yOiAnIzAwMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUb29sdGlwczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBUZW1wbGF0ZTogXCI8JT0gdmFsdWUgJT5cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgIHRvb2x0aXBzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbih0b29sdGlwSXRlbSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gZGF0YS5kYXRhc2V0c1t0b29sdGlwSXRlbS5kYXRhc2V0SW5kZXhdLmxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsICsgJzogJyArIHRvb2x0aXBJdGVtLnlMYWJlbCArICcoQ2xpY2sgaGVyZSB0byBnZXQgbW9yZSBkYXRhZmZmKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qYW5pbWF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uIChvcHRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuY29uZmlnLnR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHggPSB0aGlzLmNoYXJ0LmN0eDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguZm9udCA9IENoYXJ0LmhlbHBlcnMuZm9udFN0cmluZyhDaGFydC5kZWZhdWx0cy5nbG9iYWwuZGVmYXVsdEZvbnRGYW1pbHksICdub3JtYWwnLCBDaGFydC5kZWZhdWx0cy5nbG9iYWwuZGVmYXVsdEZvbnRGYW1pbHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgudGV4dEJhc2VsaW5lID0gJ2JvdHRvbSc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5kYXRhc2V0cy5mb3JFYWNoKGZ1bmN0aW9uIChkYXRhc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YXNldC5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBkYXRhc2V0Ll9tZXRhW09iamVjdC5rZXlzKGRhdGFzZXQuX21ldGEpWzBdXS5kYXRhW2ldLl9tb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsVGV4dChkYXRhc2V0LmRhdGFbaV0sIG1vZGVsLngsIG1vZGVsLnkgLSA1KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXBzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogZnVuY3Rpb24odG9vbHRpcEl0ZW0sIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvb2x0aXBJdGVtWzBdLnhMYWJlbCArICcgOiAnICsgdG9vbHRpcEl0ZW1bMF0ueUxhYmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZ1bmN0aW9uKHRvb2x0aXBJdGVtLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IGRhdGEuZGF0YXNldHNbdG9vbHRpcEl0ZW0uZGF0YXNldEluZGV4XS5sYWJlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gbGFiZWwgKyAnOiAnICsgdG9vbHRpcEl0ZW0ueUxhYmVsICsgJyhDbGljayBoZXJlIHRvIGdldCBtb3JlIGRhdGEpJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzY29wZS5jaGFydFR5cGUgPSBcInBpZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHNjb3BlLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0TGFiZWw6IHNjb3BlLmRhdGFzZXRMYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnREYXRhOiBzY29wZS5jaGFydERhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFsYWJlbHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGU6ICd4eScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlOiAneHknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDMwMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHNjb3BlLmNoYXJ0VHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWdlbmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IHNjb3BlLmxlZ2VuZERpc3BsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICdDaGFydC5qcyBQaWUgQ2hhcnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dUb29sdGlwczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9vbHRpcFRlbXBsYXRlOiBcIjwlPSB2YWx1ZSAlPlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGVsZW1lbnQuY29udGV4dC5pZCA9PT0gJ3Byb2ZpdGFiaWxpdHknKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2hhcnRPcHRpb25zLnRvb2x0aXBzID0ge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjYWxsYmFja3M6IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgIGxhYmVsOiBmdW5jdGlvbih0b29sdGlwSXRlbSwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiAnQ2xpY2sgZm9yIG1vcmUgZGV0YWlscyc7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbignY2hhcnREYXRhJywgZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsKSB7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0RGF0YSA9IGNoYXJ0c1NlcnZpY2UuZ2VuZXJhdGVDaGFydERhdGEoc2NvcGUuY2hhcnREYXRhLCBzY29wZS5oQXhpc1Byb3AsIHNjb3BlLnlBeGlzUHJvcCwgSlNPTi5wYXJzZShzY29wZS5kYXRlVHlwZSksIGNoYXJ0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldHMgPSBjaGFydERhdGEuZGF0YXNldHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZGF0YXNldHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkYXRhLmNvbmNhdChkYXRhc2V0c1tpXS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXggPSBkYXRhWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLm1heCA8IGRhdGFbal0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tYXggPSBkYXRhW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NoYXJ0T3B0aW9ucy5zY2FsZXMueUF4ZXNbMF0udGlja3MubWF4ID0gKCBzZWxmLm1heCAgKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhcnQgPSBjaGFydHNTZXJ2aWNlLmRyYXdDaGFydChhdHRycy5pZCwgY2hhcnREYXRhLCBjaGFydE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0Lm9wdGlvbnMuZGF0YXNldExhYmVsID09PSAnUHJvZml0YWJpbGl0eSBHTSBZVEQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2hhcnQuY2hhcnQuY3R4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbnZhcy5vbmNsaWNrID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgYWN0aXZlUG9pbnRzID0gY2hhcnQuZ2V0RGF0YXNldEF0RXZlbnQoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWN0aXZlUG9pbnRzID0gY2hhcnQuZ2V0RWxlbWVudHNBdEV2ZW50KGV2dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWN0aXZlUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnZGF0YXBvaW50Q2xpY2snLCBhY3RpdmVQb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hhcnQgJiYgY2hhcnQub3B0aW9ucy5kYXRhc2V0TGFiZWwgPT09ICdCZW5jaFNraWxsQmFyQ2hhcnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3R4ID0gY2hhcnQuY2hhcnQuY3R4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmNhbnZhcy5vbmNsaWNrID0gZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFjdGl2ZVBvaW50cyA9IGNoYXJ0LmdldEVsZW1lbnRzQXRFdmVudChldnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdiZW5jaEJhckNoYXJ0Q2xpY2snLCBhY3RpdmVQb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0Lm9wdGlvbnMuZGF0YXNldExhYmVsID09PSAnQmVuY2hTa2lsbFBpZUNoYXJ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNoYXJ0LmNoYXJ0LmN0eDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jYW52YXMub25jbGljayA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVQb2ludHMgPSBjaGFydC5nZXRFbGVtZW50c0F0RXZlbnQoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgnYmVuY2hQaWVDaGFydENsaWNrJywgYWN0aXZlUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJ0ICYmIGNoYXJ0Lm9wdGlvbnMuZGF0YXNldExhYmVsID09PSAnUHJhY3RpY2VJbnB1dEJhckNoYXJ0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0eCA9IGNoYXJ0LmNoYXJ0LmN0eDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5jYW52YXMub25jbGljayA9IGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmVQb2ludHMgPSBjaGFydC5nZXRFbGVtZW50c0F0RXZlbnQoZXZ0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncHJhY3RpY2VCYXJDaGFydENsaWNrJywgYWN0aXZlUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hhcnRDb250cm9sbGVyKCkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF0pO1xyXG4iLCIoZnVuY3Rpb24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ3NhbXBsZScpO1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ3NhbXBsZScpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnZmlyc3RPbmUnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgYmluZFRvQ29udHJvbGxlcjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdmaXJzdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAnZmlyc3QnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnaW5kZXguaHRtbCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdzYW1wbGUnKS5cclxuICAgIHNlcnZpY2UoJ2NoYXJ0c1NlcnZpY2UnLCBbJyRodHRwJywgJyRyb290U2NvcGUnLCAnJHdpbmRvdycsXHJcbiAgICAgICAgZnVuY3Rpb24oJGh0dHAsICRyb290U2NvcGUsICR3aW5kb3cpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBDT0xPUlMgPSBbXHJcbiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMzQsIDIyMSwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgyMzIsIDE0MCwgMjA5LCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDE3NCwgMTQwLCAyMzIsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMCwgMTY5LCAxOSwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxMzcsIDIwNCwgMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgyMDQsIDE3NiwgMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgyMDYsIDEwNSwgMjMsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMjU1LCA5OSwgMTMyLCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDU0LCAxNjIsIDIzNSwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxMzYsIDI1NSwgMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxNDIsIDQ4LCAxNjAsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMCwgMjIyLCAyMjAsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMjU1LCAyMDYsIDg2LCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDc1LCAxOTIsIDE5MiwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMzQsIDIyMSwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxNTMsIDEwMiwgMjU1LCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDEzOSwgMTI2LCAyNTUsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTQyLCA0OCwgMTYwLCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDE5MSwgNiwgNiwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxNTMsIDEwMiwgMjU1LCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDI1NSwgMjA2LCA4NiwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSg2NSwgMTk2LCAyNTUsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTM3LCAyMDQsIDAsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMCwgMTY5LCAxOSwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgyNTUsIDE1OSwgNjQsIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTQyLCA0OCwgMTYwLCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDI1NSwgMjA2LCA4NiwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgwLCAyMjIsIDIyMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxMzcsIDIwNCwgMCwgMC41KScsXHJcbiAgICAgICAgICAgICAgICAncmdiYSgxNzQsIDE0MCwgMjMyLCAwLjUpJyxcclxuICAgICAgICAgICAgICAgICdyZ2JhKDAsIDE2OSwgMTksIDAuNSknLFxyXG4gICAgICAgICAgICAgICAgJ3JnYmEoMTM3LCAyMDQsIDAsIDAuNSknLFxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuXHJcblxyXG4gICAgICAgICAgICB2bS5jaGFydHMgPSBbXTtcclxuXHJcblxyXG4gICAgICAgICAgICB2bS5kcmF3Q2hhcnQgPSBmdW5jdGlvbihkaXZJZCwgY2hhcnREYXRhLCBjaGFydE9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgREVGQVVMVF9DQU5WQVNfSEVJR0hUID0gMzAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIERFRkFVTFRfQ0FOVkFTX1dJRFRIID0gNDAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIERFRkFVTFRfQ0hBUlRfVFlQRSA9ICdiYXInO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNIZWlnaHQgPSAoY2hhcnRPcHRpb25zLmNoYXJ0ICYmIGNoYXJ0T3B0aW9ucy5jaGFydC5oZWlnaHQpIHx8IERFRkFVTFRfQ0FOVkFTX0hFSUdIVDtcclxuICAgICAgICAgICAgICAgIHZhciBjYW52YXNXaWR0aCA9IChjaGFydE9wdGlvbnMuY2hhcnQgJiYgY2hhcnRPcHRpb25zLmNoYXJ0LndpZHRoKSB8fCBERUZBVUxUX0NBTlZBU19XSURUSDtcclxuICAgICAgICAgICAgICAgIHZhciBjaGFydFR5cGUgPSAoY2hhcnRPcHRpb25zLmNoYXJ0ICYmIGNoYXJ0T3B0aW9ucy5jaGFydC50eXBlKSB8fCBERUZBVUxUX0NIQVJUX1RZUEU7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRpdklkKS5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgICAgICBjdHguY2FudmFzLmhlaWdodCA9IGNhbnZhc0hlaWdodDtcclxuICAgICAgICAgICAgICAgIGN0eC5jYW52YXMud2lkdGggPSBjYW52YXNXaWR0aDtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8qQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLnRvb2x0aXBzLmJhY2tncm91bmRDb2xvciA9IFwiI0VCRUJFQlwiO1xyXG4gICAgICAgICAgICAgICAgQ2hhcnQuZGVmYXVsdHMuZ2xvYmFsLnRvb2x0aXBzLnRpdGxlRm9udENvbG9yID0gXCIjMDAwXCI7XHJcbiAgICAgICAgICAgICAgICBDaGFydC5kZWZhdWx0cy5nbG9iYWwudG9vbHRpcHMuYm9keUZvbnRDb2xvciA9IFwiIzAwMFwiOyovXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjaGFydCA9IG5ldyBDaGFydChjdHgsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBjaGFydFR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY2hhcnREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNoYXJ0T3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8qXHJcblx0ICAgIFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHQgICAgXHRcdHZhciBkYXRhID0gJHdpbmRvdy5teUJhci5jaGFydC5jb25maWcuZGF0YS5kYXRhc2V0c1swXS5kYXRhO1xyXG5cdFx0ICAgIFx0XHJcblx0XHQgICAgXHRjdHguZm9udCA9ICcyMnB4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZic7XHJcblx0XHQgICAgXHRjdHguZmlsbFN0eWxlID0gXCIjMDAwXCI7ICAgICAgICBcclxuXHRcdCAgICBcdGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiOyBcclxuXHRcdCAgICBcdGZvciAodmFyIGkgaW4gZGF0YSkge1xyXG5cdFx0ICAgIFx0XHRjdHguZmlsbFRleHQoZGF0YVtpXSwgMjAwLCAxODApO1xyXG5cdFx0ICAgIFx0fVxyXG5cdCAgICBcdH0sIDEwMDApO1xyXG5cdCAgICBcdFxyXG5cdCAgICBcdFxyXG5cdCAgICBcdCovXHJcblxyXG4gICAgICAgICAgICAgICAgdm0uY2hhcnRzLnB1c2goY2hhcnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0O1xyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZtLmdlbmVyYXRlQ2hhcnREYXRhID0gZnVuY3Rpb24ocmF3RGF0YSwgeEF4aXNQcm9wLCB5QXhpc1Byb3AsIGRhdGVUeXBlLCBjaGFydE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBERUZBVUxUX0lTX0RBVEVUWVBFID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgREVGQVVMVF9EQVRBU0VUX0xBQkVMID0gJ3gtYXhpcyc7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGlzRGF0ZXR5cGUgPSBkYXRlVHlwZSB8fCBERUZBVUxUX0lTX0RBVEVUWVBFO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFzZXRMYWJlbCA9IGNoYXJ0T3B0aW9ucy5kYXRhc2V0TGFiZWwgfHwgREVGQVVMVF9EQVRBU0VUX0xBQkVMO1xyXG4gICAgICAgICAgICAgICAgLypbe1xyXG5cdCAgICAgICAgXHQgIGRhdGU6IG5ldyBEYXRlKCkuZ2V0VGltZSgpLFxyXG5cdCAgICAgICAgXHQgIHV0aWxpemF0aW9uOiAyMy40NCxcclxuXHQgICAgICAgIFx0ICBsb2NhdGlvbjogJ0FMTCdcclxuXHQgICAgICAgICAgfSx7XHJcblx0ICAgICAgICBcdCAgZGF0ZTogbmV3IERhdGUoKS5nZXRUaW1lKCksXHJcblx0ICAgICAgICBcdCAgdXRpbGl6YXRpb246IDIzLjQ0LFxyXG5cdCAgICAgICAgXHQgIGxvY2F0aW9uOiAnQUxMJ1xyXG5cdCAgICAgICAgICB9LHtcclxuXHQgICAgICAgIFx0ICBkYXRlOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuXHQgICAgICAgIFx0ICB1dGlsaXphdGlvbjogMjMuNDQsXHJcblx0ICAgICAgICBcdCAgbG9jYXRpb246ICdBTEwnXHJcblx0ICAgICAgICAgIH1dO1xyXG5cdCAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgICAgIC8qe1xyXG5cdCAgICAgICAgICAgICAgbGFiZWxzOiBbXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLCBcIkp1bHlcIl0sXHJcblx0ICAgICAgICAgICAgICBkYXRhc2V0czogW3tcclxuXHQgICAgICAgICAgICAgICAgICBsYWJlbDogJ0RhdGFzZXQgMScsXHJcblx0ICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMjIwLDIyMCwyMjAsMC41KVwiLFxyXG5cdCAgICAgICAgICAgICAgICAgIGRhdGE6IFszNCwgMzQsIDY2LCAyLCA2LCAyMywgN11cclxuXHQgICAgICAgICAgICAgIH0sIHtcclxuXHQgICAgICAgICAgICAgICAgICBsYWJlbDogJ0RhdGFzZXQgMicsXHJcblx0ICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInJnYmEoMTUxLDE4NywyMDUsMC41KVwiLFxyXG5cdCAgICAgICAgICAgICAgICAgIGRhdGE6IFs3LCAyOSwgOTksIDY3LCA4MywgNjYsIDk0XVxyXG5cdCAgICAgICAgICAgICAgfSwge1xyXG5cdCAgICAgICAgICAgICAgICAgIGxhYmVsOiAnRGF0YXNldCAzJyxcclxuXHQgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSgxNTEsMTg3LDIwNSwwLjUpXCIsXHJcblx0ICAgICAgICAgICAgICAgICAgZGF0YTogWzIzLCA0NCwgNTUsIDY4LCAzNCwgNSwgMl1cclxuXHQgICAgICAgICAgICAgIH1dXHJcblxyXG5cdCAgICAgICAgICB9OyovXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGFzZXRzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYWJlbHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGlmIChyYXdEYXRhLmNvbnN0cnVjdG9yICE9PSBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0TmFtZXMgPSBPYmplY3Qua2V5cyhyYXdEYXRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBkYXRhc2V0TmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJhd0RhdGFzZXQgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0uZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhY2tncm91bmRDb2xvciA9IHJhd0RhdGFbZGF0YXNldE5hbWVzW2ldXS5iYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxsID0gcmF3RGF0YVtkYXRhc2V0TmFtZXNbaV1dLmZpbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5lQ29sb3IgPSByYXdEYXRhW2RhdGFzZXROYW1lc1tpXV0ubGluZUNvbG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldExhYmVsID0gcmF3RGF0YVtkYXRhc2V0TmFtZXNbaV1dLmxhYmVsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gcmF3RGF0YXNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsID0gcmF3RGF0YXNldFtqXVt4QXhpc1Byb3BdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBpc0RhdGV0eXBlID09IHRydWUgPyBkYXRlVG9Nb250aChuZXcgRGF0ZShsYWJlbCkpIDogbGFiZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXRpbGl6YXRpb24gPSByYXdEYXRhc2V0W2pdW3lBeGlzUHJvcF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMucHVzaChsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnB1c2godXRpbGl6YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkYXRhc2V0TGFiZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IGxpbmVDb2xvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFzZXRzLnB1c2goZGF0YXNldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3JzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByYXdEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbCA9IHJhd0RhdGFbaV1beEF4aXNQcm9wXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWwgPSBpc0RhdGV0eXBlID09IHRydWUgPyBkYXRlVG9Nb250aChuZXcgRGF0ZShsYWJlbCkpIDogbGFiZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1dGlsaXphdGlvbiA9IHJhd0RhdGFbaV1beUF4aXNQcm9wXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJhd0RhdGFbaV0uYmFja2dyb3VuZENvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3JzLnB1c2gocmF3RGF0YVtpXS5iYWNrZ3JvdW5kQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzLnB1c2gobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEucHVzaCh1dGlsaXphdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRhdGFzZXRMYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9iYWNrZ3JvdW5kQ29sb3I6ICdyZ2JhKDEzMiwgMjMxLCAyMjEsIDAuOCknXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogYmFja2dyb3VuZENvbG9ycy5sZW5ndGggPiAwID8gYmFja2dyb3VuZENvbG9ycyA6IENPTE9SUyxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldHMucHVzaChkYXRhc2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvKnZhciBkYXRhID0gW107XHJcblx0ICAgIFx0Zm9yICh2YXIgaSBpbiByYXdEYXRhKSB7XHJcblx0ICAgIFx0XHR2YXIgbGFiZWwgPSByYXdEYXRhW2ldW3hBeGlzUHJvcF07XHJcblx0ICAgIFx0XHRsYWJlbCA9IGlzRGF0ZXR5cGUgPT0gdHJ1ZSA/IGRhdGVUb01vbnRoKG5ldyBEYXRlKGxhYmVsKSkgOiBsYWJlbDtcclxuXHQgICAgXHRcdHZhciB1dGlsaXphdGlvbiA9IHJhd0RhdGFbaV1beUF4aXNQcm9wXTtcclxuXHQgICAgXHRcdGxhYmVscy5wdXNoKGxhYmVsKTtcclxuXHQgICAgXHRcdGRhdGEucHVzaCh1dGlsaXphdGlvbik7XHJcblx0ICAgIFx0fVxyXG5cdCAgICBcdFxyXG5cdCAgICBcdHZhciBkYXRhc2V0ID0ge1xyXG5cdFx0XHRcdGxhYmVsOiAnVXRpbGl6YXRpb24nLFxyXG5cdFx0XHRcdGRhdGE6IGRhdGEsXHJcbiAgIFx0XHRcdCAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicmdiYSg4LCAyMDYsIDE4NSwgMC41KVwiXHJcblx0XHRcdH1cclxuXHRcdFx0ZGF0YXNldHMucHVzaChkYXRhc2V0KTsqL1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0cnVuY2F0ZWRMYWJlbHMgPSBsYWJlbHM7XHJcbiAgICAgICAgICAgICAgICAvKmlmIChsYWJlbHMubGVuZ3RoID4gMTUpIHtcclxuXHQgICAgXHRcdHRydW5jYXRlZExhYmVscyA9IFtdO1xyXG5cdCAgICBcdFx0Zm9yICh2YXIgaSBpbiBsYWJlbHMpIHtcclxuXHQgICAgXHRcdFx0dmFyIGZpbmFsU3RyID0gdHJ1bmNhdGVTdHJpbmcobGFiZWxzW2ldLCA2KTtcclxuXHQgICAgXHRcdFx0aWYgKGxhYmVsc1tpXS5sZW5ndGggPiA2KSBcclxuXHQgICAgXHRcdFx0XHRmaW5hbFN0ciA9IGZpbmFsU3RyICsgJy4uJztcclxuXHQgICAgXHRcdFx0XHJcblx0XHQgICAgXHRcdHRydW5jYXRlZExhYmVscy5wdXNoKGZpbmFsU3RyKTtcclxuXHRcdCAgICBcdH1cclxuXHQgICAgXHR9XHJcblx0ICAgIFx0Ki9cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhcnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsczogJC51bmlxdWUodHJ1bmNhdGVkTGFiZWxzKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0czogZGF0YXNldHNcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnREYXRhO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjYXBpdGFsaXplRmlyc3RMZXR0ZXIobGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaW5hbExhYmVsID0gbGFiZWwuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBsYWJlbC5zdWJzdHIoMSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluYWxMYWJlbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdHJ1bmNhdGVTdHJpbmcobGFiZWwsIGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhYmVsLnN1YnN0cigwLCBsZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBjdXN0b21pemVUb29sdGlwKGNoYXJ0RGF0YSkge1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRhdGVUb01vbnRoKGRhdGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBNT05USFMgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl07XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9udGggPSBNT05USFNbZGF0ZS5nZXRNb250aCgpXTtcclxuICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBtb250aCArICcgJyArIHllYXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgIF0pO1xyXG59KSgpO1xyXG4iLCJhbmd1bGFyLm1vZHVsZShcInNhbXBsZVwiKVxyXG4gICAgLmZhY3RvcnkoXCJjcmVhdGVDaGFydFNlcnZpY2VcIiwgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XHJcblxyXG4gICAgICAgIHZhciBjaGFydERhdGEgPSB7fTtcclxuICAgICAgICBjaGFydERhdGEuZ2V0Q2hhcnREYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2pzb24vZGF0YS5qc29uJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjaGFydERhdGEuZ2V0UGllQ2hhcnREYXRhID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2pzb24vZGF0YUZvclBpZS5qc29uJyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gY2hhcnREYXRhO1xyXG4gICAgfV0pO1xyXG4iXX0=
